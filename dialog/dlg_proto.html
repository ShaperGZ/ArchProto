<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Prototype</title>
    <style>
        .titles{
            font-size: 12px;
        }
        .contents{
            font-size:10px;
            vertical-align: center;
        }
        .frozenContents{
            font-size:10px;
            vertical-align: center;
            color: whitesmoke;
        }

    </style>
    <script src="d3.js"></script>
</head>
<body>

<form>
    <!--customize composition-->
    <div id="div_1" style="width:10pt; height: 30pt; background-color: red"></div>
    <div id="div_2" style="width:10pt; height: 30pt; background-color:green"></div>

    <span id="title" class="titles" > Composition Customization</span><br>
    <table >
        <tbody>
            <tr>
                <td><span class="contents" id="sp_double" > D </span></td>
                <td><span class="contents" id="sp_L-shape"> L </span></td>
                <td><span class="contents" id="sp_U-shape"> U </span></td>
                <td><span class="contents" id="sp_O-shape"> O </span></td>
            </tr>
            <tr>
                <td><input type="checkbox" id="cb_double"  onclick="on_checkbox_clicked(this)"/></td>
                <td><input type="checkbox" id="cb_L-shape" onclick="on_checkbox_clicked(this)"/></td>
                <td><input type="checkbox" id="cb_U-shape" onclick="on_checkbox_clicked(this)"/></td>
                <td><input type="checkbox" id="cb_O-shape" onclick="on_checkbox_clicked(this)"/></td>
            </tr>
        </tbody>
    </table>
    <input class="contents" id="test" value="input here"/>
    <div id="viz"></div>
    <script type="text/javascript">

        var sampleSVG = d3.select("#viz")
            .append("svg")
            .attr("width", 100)
            .attr("height", 100);

        sampleSVG.append("circle")
            .style("stroke", "gray")
            .style("fill", "white")
            .attr("r", 40)
            .attr("cx", 50)
            .attr("cy", 50)
            .on("mouseover", function(){d3.select(this).style("fill", "aliceblue");})
            .on("mouseout", function(){d3.select(this).style("fill", "white");});

    </script>

</form>
<script src="piechart.js"></script>
<script>
    function on_checkbox_clicked(obj){
        id=obj.id;
        value=obj.checked;

        params=id+","+value;
        console.log(params)
        window.location= 'skp:checkbox_clicked@'+params;
    }
    function set_checkboxes(data){
        //sample data:
        //'double=>true,L-shape=>false'
        data=data.split(',')
        data.forEach(function(d){
            kv=d.split('=>');
            k=kv[0];
            check=false;
            if (kv[1]=="true") check = true;
            id='cb_'+k
            console.log("id="+id)
            obj=document.getElementById('cb_'+k);
            if (obj!=null){
                obj.checked=check;
            }
            else{
                console.log("unable to select with id:"+id);
            }
        });

    }
    function fade_element(key){
        obj=document.getElementById(key);
        obj.style.color="lightgrey";
    }
    function unfade_element(key){
        obj=document.getElementById(key);
        obj.style.color="black";
    }
    function set_param(key,value){
        obj=document.getElementById(key);
        console.log(obj.type);
        if (obj.type=='checkbox'){
            obj.checked=value;
        }
        else if (obj.type=='text'){
            obj.value = value;
        }
        else{
            obj.innerHTML=value;
        }
    }
    fade_element("sp_O-shape")
    set_param('title','My New Title')
</script>
</body>
</html>